{"version":3,"file":"lib.js","sources":["../src/Markdownie.tsx","../src/parser.tsx"],"sourcesContent":["import React from \"react\";\nimport { parse, ParseOptions } from \"./parser\";\n\ninterface MarkdownProps {\n  content: string;\n  options?: ParseOptions;\n}\n\nfunction Markdown({ content, options }: MarkdownProps) {\n  const html = parse(content, options);\n\n  return <div>{html}</div>;\n}\n\nexport default Markdown;\n","import React from \"react\";\n\nexport interface ParseOptions {\n  langPrefix?: string;\n}\n\nexport function parse(markdown: string, options: ParseOptions = {}) {\n  const { langPrefix = \"language-\" } = options;\n\n  const lines = markdown.trim().split(/\\r\\n|\\n/);\n\n  const html: React.ReactNode[] = [];\n\n  let inCodeBlock = false;\n  let codeBlockLang: any = null;\n  let codeBlock: string[] = [];\n\n  lines.forEach((line, index) => {\n    // check for headers\n    if (/^#{1,6}\\s/.test(line)) {\n      const level = line.match(/^#{1,6}/)?.[0].length;\n      const text = line.replace(/^#{1,6}\\s/, \"\");\n      html.push(React.createElement(`h${level}`, { key: `h-${index}` }, text));\n    }\n\n    // check for horizontal rule\n    else if (/^(\\*{3,}|-{3,}|_{3,})$/.test(line)) {\n      html.push(<hr key={`hr-${index}`} />);\n    }\n\n    // check for unordered list\n    else if (/^(\\*|-)\\s/.test(line)) {\n      const text = line.replace(/^(\\*|-)\\s/, \"\");\n      html.push(<li key={`ul-${index}`}>{text}</li>);\n    }\n\n    // check for ordered list\n    else if (/^\\d+\\.\\s/.test(line)) {\n      const text = line.replace(/^\\d+\\.\\s/, \"\");\n      html.push(<li key={`ol-${index}`}>{text}</li>);\n    }\n\n    // check for blockquote\n    else if (/^>\\s/.test(line)) {\n      const text = line.replace(/^>\\s?/, \"\");\n      html.push(<blockquote key={`quote-${index}`}>{text}</blockquote>);\n    }\n\n    // check for code block\n    else if (/^```(\\S+)?$/.test(line)) {\n      inCodeBlock = !inCodeBlock;\n      if (inCodeBlock) {\n        codeBlockLang = line.match(/^```(\\S+)?$/)?.[1] || null;\n      } else {\n        const code = codeBlock.join(\"\\n\");\n        html.push(\n          <pre key={`cpde-${index}`}>\n            <code\n              className={\n                codeBlockLang ? `${langPrefix}${codeBlockLang}` : undefined\n              }\n            >\n              {code}\n            </code>\n          </pre>\n        );\n        codeBlock = [];\n        codeBlockLang = null;\n      }\n    } else if (inCodeBlock) {\n      codeBlock.push(line);\n    }\n\n    // check for inline code\n    else if (/`([^`]+)`/.test(line)) {\n      const text = line.replace(/`([^`]+)`/g, `<code>{$1}</code>`);\n      html.push(<p key={`inlcd-${index}`}>{text}</p>);\n    }\n\n    // check for links\n    else if (/\\[([^\\]]+)\\]\\(([^\\)]+)\\)/.test(line)) {\n      const text = line.replace(\n        /\\[([^\\]]+)\\]\\(([^\\)]+)\\)/g,\n        '<a href=\"$2\">$1</a>'\n      );\n      html.push(<p>{text}</p>);\n    }\n\n    // check for images\n    else if (/!\\[([^\\]]+)\\]\\(([^\\)]+)\\)/.test(line)) {\n      const match = line.match(/!\\[([^\\]]+)\\]\\(([^\\)]+)\\)/);\n      const alt = match?.[1];\n      const src = match?.[2];\n      html.push(<img key={`img-${index}`} src={src} alt={alt} />);\n    }\n    // check for tables\n    else if (/^\\|(.+\\|)+/.test(line)) {\n      const tableRows = [line];\n      while (lines.length && /^\\|(.+\\|)+/.test(lines[0])) {\n        tableRows.push(lines.shift()!);\n      }\n\n      const headerRow = tableRows.shift();\n      const headerColumns = headerRow!\n        .substring(1, headerRow!.length - 1)\n        .split(\"|\")\n        .map((column) => column.trim());\n\n      const tableHead = (\n        <thead>\n          <tr>\n            {headerColumns.map((column) => (\n              <th key={column}>{column}</th>\n            ))}\n          </tr>\n        </thead>\n      );\n\n      const tableBody = (\n        <tbody>\n          {tableRows.map((row, rowIndex) => (\n            <tr key={rowIndex}>\n              {row\n                .substring(1, row.length - 1)\n                .split(\"|\")\n                .map((cell, cellIndex) => (\n                  <td key={cellIndex}>{cell.trim()}</td>\n                ))}\n            </tr>\n          ))}\n        </tbody>\n      );\n\n      html.push(\n        <table>\n          {tableHead}\n          {tableBody}\n        </table>\n      );\n    } else if (!inCodeBlock && /(.*\\*{1,2}.*|\\*{1,2}.*\\*{1,2})/.test(line)) {\n      const text = line\n        .replace(/\\*\\*([^*]+)\\*\\*/g, \"<strong>$1</strong>\")\n        .replace(/\\*([^*]+)\\*/g, \"<em>$1</em>\");\n      html.push(<p key={index} dangerouslySetInnerHTML={{ __html: text }} />);\n    }\n    // check for charts (Assuming chartData is a JSON string)\n\n    // regular paragraph\n    else if (!inCodeBlock) {\n      html.push(<p key={index}>{line}</p>);\n    }\n  });\n\n  return html;\n}\n"],"names":["_ref","html","markdown","options","_options$langPrefix","langPrefix","lines","trim","split","inCodeBlock","codeBlockLang","codeBlock","forEach","line","index","test","_line$match","level","match","length","text","replace","push","React","createElement","key","_line$match2","code","join","className","undefined","src","alt","tableRows","shift","headerRow","headerColumns","substring","map","column","tableHead","tableBody","row","rowIndex","cell","cellIndex","dangerouslySetInnerHTML","__html","parse","content"],"mappings":"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"}